'use strict';

const EggLoader = require('egg-core').EggLoader;

/**
 * Agent worker process loader
 * @see https://github.com/eggjs/egg-loader
 */
class AgentWorkerLoader extends EggLoader {

  /**
   * loadPlugin first, then loadConfig
   */
  loadConfig() {
    this.loadPlugin();
    super.loadConfig();
  }
  // egg的agent.js初始化里使用了loader.load();
  load() {
    // egg-core-loader-minxin中定义
    // 加载extend下的agent.js
    this.loadAgentExtend();
    this.loadCustomAgent();
  }
}

module.exports = AgentWorkerLoader;
